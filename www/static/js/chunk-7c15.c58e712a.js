(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7c15"],{"0Cwi":function(a,t,e){"use strict";var l=e("cumh");e.n(l).a},"8vTx":function(a,t,e){"use strict";e.r(t);var l=e("QbLZ"),r=e.n(l),o=e("vDqi"),n=e.n(o),d=e("L2JU"),i={data:function(){return{dialogWidth:"92%",tod_yes_data:[{tod_yes:"今交易额",all:"加载中...",ali:"加载中...",wx:"加载中..."},{tod_yes:"今手续费",all:"加载中...",ali:"加载中...",wx:"加载中..."},{tod_yes:"昨交易额",all:"加载中...",ali:"加载中...",wx:"加载中..."},{tod_yes:"昨手续费",all:"加载中...",ali:"加载中...",wx:"加载中..."},{tod_yes:"总交易额",all:"加载中...",ali:"加载中...",wx:"加载中..."},{tod_yes:"总手续费",all:"加载中...",ali:"加载中...",wx:"加载中..."}],yes_tod_data:[{yes_tod:"今日",all_orderNumber:"加载中...",no_orderNumber:"加载中...",pay_orderNumber:"加载中...",pay_all:"加载中..."},{yes_tod:"昨日",all_orderNumber:"加载中...",no_orderNumber:"加载中...",pay_orderNumber:"加载中...",pay_all:"加载中..."},{yes_tod:"总",all_orderNumber:"加载中...",no_orderNumber:"加载中...",pay_orderNumber:"加载中...",pay_all:"加载中..."}],formLabelWidth:"70px",merchantMeal:"",mealOptions:"",merchantEdit:!1,merchantCount:!1,merchantForm:{},type:[{value1:"uid",label:"商户号"},{value1:"email",label:"邮箱"}],value1:"uid",value2:"",list:null,page:{page:1,num:10,total:0},listLoading:!1,screenWidth:document.body.clientWidth}},computed:r()({},Object(d.b)(["roles"])),mounted:function(){this.getMerchant(),this.getMealOptions(),this.getScreenWidth()},methods:{getScreenWidth:function(){this.screenWidth<990?this.dialogWidth="98%":this.dialogWidth="42%"},getDayMoney:function(a){var t=this;n.a.get("https://api.logpay.cn/order/getDayMoney",{params:{uid:a}}).then(function(a){if(-1==a.data.code)return t.$message.error(a.data.msg),!1;t.tod_yes_data[0].ali=a.data.data.tod_ali,t.tod_yes_data[1].ali=a.data.data.tod_ali_fee,t.tod_yes_data[0].wx=a.data.data.tod_wx,t.tod_yes_data[1].wx=a.data.data.tod_wx_fee,t.tod_yes_data[0].all=a.data.data.tod_all,t.tod_yes_data[1].all=a.data.data.tod_all_fee,t.yes_tod_data[0].pay_all=a.data.data.tod_all,t.tod_yes_data[2].ali=a.data.data.yes_ali,t.tod_yes_data[3].ali=a.data.data.yes_ali_fee,t.tod_yes_data[2].wx=a.data.data.yes_wx,t.tod_yes_data[3].wx=a.data.data.yes_wx_fee,t.tod_yes_data[2].all=a.data.data.yes_all,t.tod_yes_data[3].all=a.data.data.yes_all_fee,t.yes_tod_data[1].pay_all=a.data.data.yes_all,t.tod_yes_data[4].ali=a.data.data.all_ali,t.tod_yes_data[5].ali=a.data.data.all_ali_fee,t.tod_yes_data[4].wx=a.data.data.all_wx,t.tod_yes_data[5].wx=a.data.data.all_wx_fee,t.tod_yes_data[4].all=a.data.data.all_all,t.tod_yes_data[5].all=a.data.data.all_all_fee,t.yes_tod_data[2].pay_all=a.data.data.all_all})},getOrderNumber:function(a){var t=this;n.a.get("https://api.logpay.cn/order/getOrderNumber",{params:{uid:a}}).then(function(a){if(-1==a.data.code)return t.$message.error(a.data.msg),!1;t.yes_tod_data[0].pay_orderNumber=a.data.data.today_success_order.length,t.yes_tod_data[0].no_orderNumber=a.data.data.today_no_order.length,t.yes_tod_data[0].all_orderNumber=a.data.data.today_all_order.length,t.yes_tod_data[1].pay_orderNumber=a.data.data.yes_success_order.length,t.yes_tod_data[1].no_orderNumber=a.data.data.yes_no_order.length,t.yes_tod_data[1].all_orderNumber=a.data.data.yes_all_order.length,t.yes_tod_data[2].pay_orderNumber=a.data.data.all_success_order.length,t.yes_tod_data[2].no_orderNumber=a.data.data.all_no_order.length,t.yes_tod_data[2].all_orderNumber=a.data.data.all_order.length})},getMealOptions:function(){var a=this,t=[];n()({url:"https://api.logpay.cn/user/getMeal",method:"get",params:{role:this.roles[0]}}).then(function(e){if(-1==e.data.code)return a.$message.error(e.data.msg),!1;e.data.data.meal.forEach(function(a){"mf"===a.mealName?t.push({value:"mf",label:"免费版"}):"bz"===a.mealName?t.push({value:"bz",label:"标准版"}):"gj"===a.mealName?t.push({value:"gj",label:"高级版"}):t.push({value:a.mealName,label:a.mealName})}),a.mealOptions=t}).catch(function(t){return a.$message.error("系统繁忙")})},cancel:function(){this.merchantEdit=!1,this.getMerchant()},handleEdit:function(a){this.merchantEdit=!0,this.merchantMeal=a.meal,this.merchantForm=a},submitChange:function(){var a=this;this.merchantEdit=!1,n.a.post("https://api.logpay.cn/user/changeMerchantMeal",{_id:this.merchantForm._id,meal:this.merchantMeal,money:this.merchantForm.money,mealtime:this.merchantForm.mealtime,remark:this.merchantForm.remark}).then(function(t){if(-1==t.data.code)return a.$message.error(t.data.msg),!1;a.$message.success(t.data.msg),a.getMerchant()}).catch(function(t){return a.$message.error(t)})},handleMerchant:function(a){this.merchantCount=!0,this.getDayMoney(a.uid),this.getOrderNumber(a.uid)},selectMerchant:function(){this.getMerchant()},handleSizeChange:function(a){this.page.num=a,this.getMerchant()},nextPage:function(a){this.page.page=a,this.getMerchant()},getMerchant:function(){var a=this;this.listLoading=!0,n()({url:"https://api.logpay.cn/user/getMerchant",method:"get",params:{type:this.value1,value:this.value2,page:this.page.page,num:this.page.num,role:this.roles[0]}}).then(function(t){if(-1==t.data.code)return a.$message.error(t.data.msg),!1;a.list=t.data.data.select,a.list.map(function(a){a.date=a.date.substring(0,10)+" "+a.date.substring(11,19)}),a.page.total=t.data.data.user.length,a.listLoading=!1}).catch(function(t){return a.$message.error("系统繁忙")})}}},s=(e("0Cwi"),e("KHd+")),c=Object(s.a)(i,function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"header"},[e("el-select",{staticStyle:{margin:"5px 0",width:"49%"},attrs:{placeholder:"请选择"},model:{value:a.value1,callback:function(t){a.value1=t},expression:"value1"}},a._l(a.type,function(a){return e("el-option",{key:a.value1,attrs:{label:a.label,value:a.value1}})})),a._v(" "),e("el-input",{staticStyle:{width:"49%"},attrs:{placeholder:""},model:{value:a.value2,callback:function(t){a.value2=t},expression:"value2"}}),a._v(" "),e("el-button",{staticStyle:{margin:"0 0 5px 5px"},attrs:{size:"mini"},on:{click:a.selectMerchant}},[a._v("查询")])],1),a._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.listLoading,expression:"listLoading"}],attrs:{data:a.list,"element-loading-text":"Loading",border:"",fit:""}},[e("el-table-column",{attrs:{prop:"uid",label:"商户号",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"email",label:"商户邮箱",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"money",label:"商户余额",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"meal",label:"套餐",align:"center"},scopedSlots:a._u([{key:"default",fn:function(t){return["mf"==t.row.meal?e("span",{staticStyle:{color:"#37B328"}},[a._v("免费版")]):"bz"==t.row.meal?e("span",{staticStyle:{color:"#37B328"}},[a._v("标准版")]):"gj"==t.row.meal?e("span",{staticStyle:{color:"#37B328"}},[a._v("高级版")]):e("span",{staticStyle:{color:"#37B328"}},[a._v(a._s(t.row.meal))])]}}])}),a._v(" "),e("el-table-column",{attrs:{prop:"mealtime",label:"到期时间",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"date",label:"注册时间",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"address",label:"注册地址",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){a.handleEdit(t.row)}}},[a._v("编辑")]),a._v(" "),e("span",{staticStyle:{height:"5px"}}),a._v(" "),e("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){a.handleMerchant(t.row)}}},[a._v("统计")])]}}])})],1),a._v(" "),e("el-pagination",{staticStyle:{width:"100%"},attrs:{"page-sizes":[10,20,30,40],"page-size":a.page.num,layout:"total, sizes, prev, pager, next, jumper",total:a.page.total},on:{"size-change":a.handleSizeChange,"current-change":a.nextPage}}),a._v(" "),e("el-dialog",{attrs:{title:"编辑商户",visible:a.merchantEdit,width:a.dialogWidth},on:{"update:visible":function(t){a.merchantEdit=t}}},[e("el-form",{attrs:{model:a.merchantForm}},[e("el-form-item",{attrs:{label:"商户号","label-width":a.formLabelWidth}},[e("el-input",{attrs:{"auto-complete":"off",placeholder:"",disabled:!0},model:{value:a.merchantForm.uid,callback:function(t){a.$set(a.merchantForm,"uid",t)},expression:"merchantForm.uid"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"商户邮箱","label-width":a.formLabelWidth}},[e("el-input",{attrs:{"auto-complete":"off",placeholder:"",disabled:!0},model:{value:a.merchantForm.email,callback:function(t){a.$set(a.merchantForm,"email",t)},expression:"merchantForm.email"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"商户余额","label-width":a.formLabelWidth}},[e("el-input",{attrs:{"auto-complete":"off",placeholder:""},model:{value:a.merchantForm.money,callback:function(t){a.$set(a.merchantForm,"money",t)},expression:"merchantForm.money"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"商户套餐","label-width":a.formLabelWidth}},[[e("el-select",{attrs:{placeholder:"请选择"},model:{value:a.merchantMeal,callback:function(t){a.merchantMeal=t},expression:"merchantMeal"}},a._l(a.mealOptions,function(a){return e("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})}))]],2),a._v(" "),e("el-form-item",{attrs:{label:"到期时间","label-width":a.formLabelWidth}},[e("el-input",{attrs:{"auto-complete":"off",placeholder:""},model:{value:a.merchantForm.mealtime,callback:function(t){a.$set(a.merchantForm,"mealtime",t)},expression:"merchantForm.mealtime"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"备注","label-width":a.formLabelWidth}},[e("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入该商户的备注"},model:{value:a.merchantForm.remark,callback:function(t){a.$set(a.merchantForm,"remark",t)},expression:"merchantForm.remark"}})],1)],1),a._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(t){a.cancel()}}},[a._v("取 消")]),a._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(t){a.submitChange()}}},[a._v("确 定")])],1)],1),a._v(" "),e("el-dialog",{attrs:{title:"商户统计",visible:a.merchantCount,width:a.dialogWidth},on:{"update:visible":function(t){a.merchantCount=t}}},[e("p",{staticStyle:{"text-align":"center"}},[a._v("交易额数据")]),a._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{data:a.tod_yes_data,border:""}},[e("el-table-column",{attrs:{align:"center",prop:"tod_yes",label:""}}),a._v(" "),e("el-table-column",{attrs:{align:"center",prop:"ali",label:"支付宝"}}),a._v(" "),e("el-table-column",{attrs:{align:"center",prop:"wx",label:"微信支付"}}),a._v(" "),e("el-table-column",{attrs:{align:"center",prop:"all",label:"总收款"}})],1),a._v(" "),e("div",{staticClass:"yes_tod_data"},[e("p",{staticStyle:{"text-align":"center"}},[a._v("订单数据")]),a._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{data:a.yes_tod_data,border:""}},[e("el-table-column",{attrs:{align:"center",prop:"yes_tod",label:""}}),a._v(" "),e("el-table-column",{attrs:{align:"center",prop:"all_orderNumber",label:"总订单数"}}),a._v(" "),e("el-table-column",{attrs:{align:"center",prop:"no_orderNumber",label:"未回调订单数"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("span",{staticStyle:{color:"red"}},[a._v(a._s(t.row.no_orderNumber))])]}}])}),a._v(" "),e("el-table-column",{attrs:{align:"center",prop:"pay_orderNumber",label:"付款订单数"}}),a._v(" "),e("el-table-column",{attrs:{align:"center",prop:"pay_all",label:"总收入"}})],1)],1),a._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(t){a.merchantCount=!1}}},[a._v("确 定")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="index.vue";t.default=c.exports},cumh:function(a,t,e){}}]);